---
- hosts: all
  gather_facts: False
  tasks:
    - name: 'Install Pip'
      apt:
        name: python-pip
        update_cache: yes

    - name: 'Install docker-py'
      shell: 'sudo pip install docker-py'

    - name: 'Create a volume with options'
      docker_volume:
        name: app_volume

    - name: 'Pull Server Image'
      docker_image:
        name: rgrannell1/polonium_site

    - name: 'Run Docker Image'
      docker_container:
        name: polonium_site
        image: rgrannell1/polonium_site
        state: started
        ports:
          - "80:8080"
          - "443:8081"
